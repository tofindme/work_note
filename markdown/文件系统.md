## 操作系统文件系统，虚拟文件系统一直由于设计哲学而出名，所以深入的学习下。

> linux系统包含各种类型的文件系统，ext3、sda3等等，windows是以磁盘来区分的，所以一个文件系统相当于一个盘符存储空间，但是这样的一个文件系统不能读写，需要挂载到指定目录才可以，所以用df查看时会说明某个文件系统挂载在哪个目录下


**简述:**

<font color=red>
操作系统磁盘的存储单元是扇区，一个扇区是512个字节，而文件的内容是放在磁盘上面的,读取文件内容就是从磁盘去读取的，然而计算机在读取的时候并不是一个扇区一个扇区的去读，一次性读取多个扇区，通常我们会读8个扇区称为一个块，所以一次性就读4kb。文件内容放在磁盘上面可以读取了，如此我们需要找到这些块则需要另外一个与文件名关联的一个东西叫inode，中文名称叫索引节点。索引结点包含文件的一些元信息。例如：文件的创建者，时间信息，大小，字节等

inode也会消耗硬盘空间，所以硬盘格式化的时候，操作系统自动将硬盘分成两个区域。一个是数据区，存放文件数据；另一个是inode区（inode table），存放inode所包含的信息。

</font>


索引节点主要包含以下信息:

- 文件的字节数
- 文件拥有者的User ID
- 文件的Group ID
- 文件的读、写、执行权限
- 文件的时间戳，共有三个：ctime指inode上一次变动的时间，mtime指文件内容上一次变动的时间，atime指文件上一次打开的时间
- 链接数，即有多少文件名指向这个inode
- 文件数据block的位置

上面这些东西可以用`stat`命令来获取文件的这些信息

**example:**

```
  File: `conf.sh'
  Size: 1756        Blocks: 8          IO Block: 4096   regular file
Device: 802h/2050d  Inode: 143197      Links: 1
Access: (0755/-rwxr-xr-x)  Uid: (    0/    root)   Gid: (    0/    root)
Access: 2016-06-20 16:04:53.176113559 +0800
Modify: 2016-06-20 16:04:53.176113559 +0800
Change: 2016-06-20 16:04:53.177113559 +0800
```

文件名相当于inode的一个别名，系统是只认inode的。通常我们进入linux系统会看到文件名然后可以看到文件内容，实际操作的是inode。它会通过文件名找到对应的inode进而找到相应的文件内容。

- 硬链接

通常windows上面会可以为文件或目录创建快捷方式，点击文件的快捷方式就能便捷的找到对应的目录或文件内容，所以linux同样可以有这样的操作，我们称之为硬链接，比方文件A，`ln A B`为文件A创建件一个硬链接B.再用`ls -li`可以看到两个文件的inode是相同的，这样我们之前说的inode的链接数会等于文件数目与他引用的个数

- 软链接

`ln -s A(源文文件或目录) B(目标文件或目录)`创建的软链接，会生成两个不同inode的文件，和硬链接不同，创建出的软链接目录或文件的inode存储的内容为实际为目标目录或文件的地址，从而读打开A读到的内容为B。或B被删除了，再去打开A则会报错找不到该文件或目录


http://www.ruanyifeng.com/blog/2011/12/inode.html

http://www.cnblogs.com/yyyyy5101/articles/1901842.html
