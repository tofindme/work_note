# redis

> redis是一个非常优秀的开源项目，可以说是一本数据结构相关的活教程。它是一个k-v的基于内存的数据库，所以一般用做简单的数据库或是缓存系统，他提供了各种数据的存储string,set,hash,list等常用的数据结构都可以存储

### 阅读参考

以下是别人翻译的文章，讲的非常详细

http://origin.redisbook.com/

### 访问频率限制

为了防止在一定时间内一个ip地址访问频率限制，用Redis的list来实现比较方便，用ip地址来用key，把最后访问时间放到链表里去。


——————————————————————————————————————————————————————————————————————————————
a13    a12    a11    a10    a9    a8    a7    a6    a5    a4    a3    a2    a1
——————————————————————————————————————————————————————————————————————————————


如图，假设上面是一个ip地址已经访问的次数，a*代表此ip访问时的时间戳

```clang
LPUSH IP a1
LPUSH IP a2
LPUSH IP a3

if (LLEN(IP) < LIMIT) {
    LPUSH IP a4
}else{
    last = LINDEX IP -1
    if ((now - last) > secs){
        //错误!在规定时间内访问过于频繁
    }else{
        LTRIM 0 9 //保留最近十次
    }
}
```

LPUSH & RPUSH

LPUSH往链表左端追加元素
RPUSH往链表右端追加无素

                                ———————————————————————————————————
LPUSH---->                                                                              <---- RPUSH
                                ———————————————————————————————————



